# lightning.pytorch==2.1.3
seed_everything: 0
trainer:
  accelerator: gpu
  strategy: auto
  devices: auto
  num_nodes: 1
  precision: null
  # logger: true
  logger:
    class_path: lightning.pytorch.loggers.CSVLogger
    init_args:
      name: lightning_logs
      version: null
  callbacks:
  - class_path: lightning.pytorch.callbacks.ModelCheckpoint
    init_args:
      dirpath: null
      filename: null
      monitor: null
      verbose: false
      save_last: null
      save_top_k: -1
      save_weights_only: false
      mode: min
      auto_insert_metric_name: true
      every_n_train_steps: null
      train_time_interval: null
      every_n_epochs: 1
      save_on_train_epoch_end: true
      enable_version_counter: true
  fast_dev_run: false
  max_epochs: 30
  min_epochs: null
  max_steps: -1
  min_steps: null
  max_time: null
  limit_train_batches: null
  limit_val_batches: null
  limit_test_batches: null
  limit_predict_batches: null
  overfit_batches: 0.0
  val_check_interval: null
  check_val_every_n_epoch: 1000
  num_sanity_val_steps: 0
  log_every_n_steps: null
  enable_checkpointing: null
  enable_progress_bar: null
  enable_model_summary: null
  accumulate_grad_batches: 1
  gradient_clip_val: null
  gradient_clip_algorithm: null
  deterministic: null
  benchmark: null
  inference_mode: true
  use_distributed_sampler: true
  profiler: null
  detect_anomaly: false
  barebones: false
  plugins: null
  sync_batchnorm: false
  reload_dataloaders_every_n_epochs: 0
  default_root_dir: null
model:
  dataset_name: BioRED
  lm_checkpoint: microsoft/BiomedNLP-BiomedBERT-base-uncased-abstract
  task: cluster
  ner_config:
    class: NER
    config:
      length_embedder:
        class: LengthEmbedding
        config:
          num_embeddings: 100
          embedding_dim: 16
      span_embedder:
        class: SpanEmbedder
        config:
          token_embedder:
            class: Identity
            config: {}
          token_pooler:
            function: max_pool
          vector_embedder:
            class: MLP1
            config:
              output_dim: 128
      num_entity_classes: {}
  clusterer_config:
    class: Coreference
    config:
      levenshtein_embedder:
        class: LevenshteinEmbedding
        config:
          num_embeddings: 500
          embedding_dim: 16
      levenshtein_gate:
        class: Gate
        config: {}
      span_embedder:
        class: SpanEmbedder
        config:
          token_embedder:
            class: Identity
            config: {}
          token_pooler:
            function: max_pool
          vector_embedder:
            class: Identity
            config: {}
      type_embedder:
        class: TypeEmbedding
        config:
          num_embeddings: 8
          embedding_dim: 16
      length_embedder:
        class: LengthEmbedding
        config:
          num_embeddings: 1000
          embedding_dim: 32
      length_difference_embedder:
        class: LengthDiffEmbedding
        config:
          num_embeddings: 1000
          embedding_dim: 32
      num_coref_classes: 2
      coref_cutoff: 0.5
  rc_config:
    class: RelationClassifier
    config:
      span_embedder:
        class: SpanEmbedder
        config:
          token_embedder:
            class: Identity
            config: {}
          token_pooler:
            function: max_pool
          vector_embedder:
            class: Identity
            config: {}
      intervening_span_embedder:
        class: SpanEmbedder
        config:
          token_embedder:
            class: Identity
            config: {}
          token_pooler:
            function: max_pool
          vector_embedder:
            class: Identity
            config: {}
      span_pooler:
        class: MLP2Pooler
        config:
          intermediate_dim: 128
          output_dim: 64
      type_embedder:
        class: TypeEmbedding
        config:
          num_embeddings: 10
          embedding_dim: 16
      local_pooler:
        class: MLP2Pooler
        config:
          intermediate_dim: 128
          output_dim: 64
      token_distance_embedder:
        class: TokenDistanceEmbedding
        config:
          num_embeddings: 2048
          embedding_dim: 16
      sentence_distance_embedder:
        class: SentenceDistanceEmbedding
        config:
          num_embeddings: 64
          embedding_dim: 16
      relation_embedder:
        class: MLP1
        config:
          output_dim: 128
      num_relation_classes: {}
      is_multilabel: false
      rc_cutoff: 0.5
  loss_coefficients:
  - 1
  - 1
  - 1
  lm_learning_rate: 5.0e-05
  learning_rate: 0.001
  ner_scorer_classes:
  - TypedLocationNERScorer
  coref_scorer_classes:
  - TypedLocationCorefScorer
  entity_scorer_classes:
  - TypedLocationStrictEntityScorer
  - TypedLocationRelaxedEntityScorer
  rc_scorer_classes:
  - TypedLocationStrictRCScorer
  - UntypedLocationStrictRCScorer
  - TypedLocationRelaxedRCScorer
  calculator_class: Calculator
  neg_to_pos_span_ratio: 11
  neg_to_pos_span_pair_ratio: 9
  neg_to_pos_relation_ratio: 3
  span_sampling_probs:
    multi_shift: 0.5
    short: 0.5
  max_span_length: 10
  dropout_prob: 0.2
data:
  dataset_name: BioRED
  lm_checkpoint: microsoft/BiomedNLP-BiomedBERT-base-uncased-abstract
ckpt_path: null
